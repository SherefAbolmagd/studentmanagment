"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(t){function r(t,n){this.name=n,this.path=t,this.keys=[],this.fns=[],this.params={},this.regex=f(this.path,this.keys,!1,!1)}var s=[],i={},n="routie",e=t[n];r.prototype.addHandler=function(t){this.fns.push(t)},r.prototype.removeHandler=function(t){for(var n=0,e=this.fns.length;n<e;n++){if(t==this.fns[n])return void this.fns.splice(n,1)}},r.prototype.run=function(t){for(var n=0,e=this.fns.length;n<e;n++)this.fns[n].apply(this,t)},r.prototype.match=function(t,n){var e=this.regex.exec(t);if(!e)return!1;for(var o=1,r=e.length;o<r;++o){var i=this.keys[o-1],a="string"==typeof e[o]?decodeURIComponent(e[o]):e[o];i&&(this.params[i.name]=a),n.push(a)}return!0},r.prototype.toURL=function(t){var n=this.path;for(var e in t)n=n.replace("/:"+e,"/"+t[e]);if(-1!=(n=n.replace(/\/:.*\?/g,"/").replace(/\?/g,"")).indexOf(":"))throw Error("missing parameters for url: "+n);return n};function o(t,n){var e=t.split(" "),o=2==e.length?e[0]:null;t=2==e.length?e[1]:e[0],i[t]||(i[t]=new r(t,o),s.push(i[t])),i[t].addHandler(n)}function a(t,n){if("function"==typeof n)o(t,n),a.reload();else if("object"==_typeof(t)){for(var e in t)o(e,t[e]);a.reload()}else void 0===n&&a.navigate(t)}var f=function(t,a,n,e){return t instanceof RegExp?t:(t instanceof Array&&(t="("+t.join("|")+")"),t=t.concat(e?"":"/?").replace(/\/\(/g,"(?:/").replace(/\+/g,"__plus__").replace(/(\/)?(\.)?:(\w+)(?:(\(.*?\)))?(\?)?/g,function(t,n,e,o,r,i){return a.push({name:o,optional:!!i}),n=n||"",(i?"":n)+"(?:"+(i?n:"")+(e||"")+(r||e&&"([^/.]+?)"||"([^/]+?)")+")"+(i||"")}).replace(/([\/.])/g,"\\$1").replace(/__plus__/g,"(.+)").replace(/\*/g,"(.*)"),RegExp("^"+t+"$",n?"":"i"))};a.lookup=function(t,n){for(var e=0,o=s.length;e<o;e++){var r=s[e];if(r.name==t)return r.toURL(n)}},a.remove=function(t,n){var e=i[t];e&&e.removeHandler(n)},a.removeAll=function(){i={},s=[]},a.navigate=function(t,n){var e=(n=n||{}).silent||!1;e&&h(),setTimeout(function(){window.location.hash=t,e&&setTimeout(function(){u()},1)},1)},a.noConflict=function(){return t[n]=e,a};var c=a.reload=function(){for(var t,n,e,o=window.location.hash.substring(1),r=0,i=s.length;r<i;r++){var a=s[r];if(t=o,e=[],(n=a).match(t,e)&&(n.run(e),1))return}},u=function(){t.addEventListener?t.addEventListener("hashchange",c,!1):t.attachEvent("onhashchange",c)},h=function(){t.removeEventListener?t.removeEventListener("hashchange",c):t.detachEvent("onhashchange",c)};u(),t[n]=a}(window);